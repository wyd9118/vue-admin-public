(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59c9e600"],{"016b":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"chart-section"},[e("h4",{staticClass:"section-title"},[t._v("趋势图")]),e("div",{staticClass:"time-section"},[e("el-button",{attrs:{type:"primary",plain:"",size:"small"},nativeOn:{click:function(a){return t.resetChart(7)}}},[t._v("7天")]),e("el-button",{attrs:{type:"primary",plain:"",size:"small"},nativeOn:{click:function(a){return t.resetChart(14)}}},[t._v("14天")]),e("el-button",{attrs:{type:"primary",plain:"",size:"small"},nativeOn:{click:function(a){return t.resetChart(30)}}},[t._v("30天")]),e("span",{staticClass:"label"},[t._v("时间：")]),e("el-date-picker",{attrs:{size:"small",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.dateValue,callback:function(a){t.dateValue=a},expression:"dateValue"}}),e("el-button",{staticClass:"btn-search",attrs:{type:"primary",size:"small"},nativeOn:{click:function(a){return t.resetChart(a)}}},[t._v("搜索")])],1),e("line-chart",{attrs:{config:t.chartData}})],1),e("div",{staticClass:"detail-section"},[e("h4",{staticClass:"section-title"},[t._v("详细数据")]),e("el-table",{attrs:{data:t.loginData.data}},[e("el-table-column",{attrs:{prop:"range_date",label:"登录时间"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(t._f("formatTime")(a.row.range_date,"YYYY-MM-DD")))]}}])}),e("el-table-column",{attrs:{prop:"user_count",label:"人数"}}),e("el-table-column",{attrs:{prop:"brow_count",label:"学习人次"}}),e("el-table-column",{attrs:{prop:"learn_avgs",label:"学习人次"}}),e("el-table-column",{attrs:{prop:"duration_avgs",label:"人均时长（分钟）"}})],1),e("pagination",{attrs:{total:t.loginData.total},on:{"current-change":t.initLoginChart,"size-change":t.initLoginChart}})],1)])},r=[],i=(e("4160"),e("d81d"),e("a9e3"),e("b64b"),e("159b"),e("c1df")),s=e.n(i),l=e("ccaf"),o=e("da32"),c=e("f70a"),u=e("4d86"),d={name:"login-chart",data:function(){return{chartData:{id:"login-chart",width:800,height:400,xAttr:"range_date",yAttr:"value",type:"type",yTitle:"数量",data:[]},dateValue:"",start:"",end:"",loginData:{total:0,data:[]}}},components:{LineChart:o["a"],Pagination:u["a"]},methods:{initLoginChart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.pageNo,e=t.pageSize,n=this;if(!this.start||!this.end){var r=this.getTimeByDays(7);this.start=r.start,this.end=r.end}var i={publicNumberId:1,pageNo:a||1,pageSize:e||7,startTime:this.start,endTime:this.end};Object(c["c"])(i).then((function(t){if(console.log(t),t&&0===t.errorCode&&t.data){var a=[],e={user_count:"登录人数",duration_avgs:"人均时长(分钟)",learn_avgs:"人均次数",brow_count:"学习人次"};t.data.records.forEach((function(t){Array.prototype.push.apply(a,Object.keys(e).map((function(a){return{range_date:t.range_date,type:e[a],value:t[a]}})))})),n.chartData.data=a,n.loginData.data=t.data.records,n.loginData.total=t.data.totalSize}})).catch()},getTimeByDays:function(t){return{start:s()().subtract(t,"days").format("YYYY-MM-DD"),end:Object(l["a"])()}},resetChart:function(t){var a,e;if(t=Number(t),t){var n=this.getTimeByDays(t);a=n.start,e=n.end}else{if(!this.dateValue)return this.$alert("请设置时间"),!1;a=Object(l["a"])(this.dateValue[0],"YYYY-MM-DD"),e=Object(l["a"])(this.dateValue[1],"YYYY-MM-DD")}this.start=a,this.end=e,this.initLoginChart()},queryLoginData:function(){}},created:function(){this.initLoginChart()}},p=d,h=(e("dc9a"),e("2877")),g=Object(h["a"])(p,n,r,!1,null,"0fd1da7e",null);a["default"]=g.exports},"4d86":function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-pagination",{attrs:{"page-size":t.pageSize,total:t.total,"current-page":t.pageNo,background:t.background,layout:t.layout,"page-sizes":t.sizes},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})},r=[],i=(e("a9e3"),{name:"Pagination",props:{pageSize:{type:Number,default:10},pageNo:{type:Number,default:1},background:{type:Boolean,default:!1},total:{type:Number,required:!0,default:0},layout:{type:String,default:"prev,pager,next,sizes"},small:{type:Boolean,default:!1},sizes:{type:Array,default:function(){return[10,30,50]}}},methods:{handleCurrentChange:function(t){this.$emit("current-change",{pageNo:t})},handleSizeChange:function(t){this.$emit("size-change",{pageSize:t})}}}),s=i,l=(e("6fda"),e("2877")),o=Object(l["a"])(s,n,r,!1,null,"c0f2ec98",null);a["a"]=o.exports},"6fda":function(t,a,e){"use strict";var n=e("f581"),r=e.n(n);r.a},"7ba8":function(t,a,e){},dc9a:function(t,a,e){"use strict";var n=e("7ba8"),r=e.n(n);r.a},f581:function(t,a,e){}}]);